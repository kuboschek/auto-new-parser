#!/usr/bin/env/ python3
import cog
import json

def insert_header():
    cog.outl("/* This file was generated by Cog.  *")
    cog.outl(" * DO NOT EDIT. GENERATE A NEW ONE. */")
    cog.outl()

def load_msg_file(thefile="messages.json"):
    with open(thefile) as data_file:
        msg_file = json.load(data_file)

    return msg_file

def find_max_msg_id(msg_list):
    max_id = 0;

    for msg in msg_list:
        if msg["id"] > max_id:
            max_id = msg["id"]

    return max_id


def generate_req_msgs(msg_list):
    req_id_start = find_max_msg_id(msg_list)

    req_msgs = []

    for msg in msg_list:
        if msg["generate_req"]:
            req_id_start += 1
            req_msgs.append({'id':req_id_start, 'name':(msg["name"] + "_req")})

    return req_msgs
